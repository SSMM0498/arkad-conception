@startuml "subscription activity diagram"
skinparam shadowing false
skinparam monochrome true
!pragma useVerticalIf on
partition "subscription activity diagram" {
    start
    : Processing request infos;
    if (exceeding the limit of subscription) then (yes)
        stop
    endif
    repeat : Processing request infos;
    backward: Request new subscription infos;
    repeat while (wrong format of subscription infos)
    : Authorization access;
    : Prepare a send flow;
    stop
}

' start
' if (condition A) then (yes)
'   :Text 1;
' elseif (condition B) then (yes)
'   :Text 2;
'   stop
' elseif (condition C) then (yes)
'   :Text 3;
' elseif (condition D) then (yes)
'   :Text 4;
' else (nothing)
'   :Text else;
' endif
' stop

' activate Client
' Client ->  Server: Request subscription
' Server ->  Server: Processing request infos
' alt exceeding the limit of subscription
'     Server --> Client: Denial access
' else successful case
'     alt wrong format of subscription infos
'         loop while format of subscription infos is wrong
'             Server --> Client: Request new subscription infos
'             Client ->  Server: Resend subscription infos
'             Server ->  Server: Processing request infos
'             deactivate Server
'         end
'     else successful case
'         Server --> Client: Authorization access
'         Client ->  Server: Subcription complete
'         Server ->  Server: Prepare a send flow
'         deactivate Server
'         ref over Client, Server : Cast new event
'         |||
'     end
' end

@enduml